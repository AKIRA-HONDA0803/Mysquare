<div class = "container offset-1">
 <div class= "text-center">
  <%= flash[:notice] %>
 </div>
 <div class = "row">
  <div class ="col-10 offset-1 mb-5">
   <div class="nes-container is-rounded is-dark">
    <div class="d-flex flex-wrap">
     <div class ="col-2">
    <%= attachment_image_tag @user, :profile_image, size: "100x100", fallback: "no_image.jpg", class:" rounded-circle" %>
    </div>
     <div class ="col-10">
      <div class="d-flex justify-content-between">
      <h2><%= @user.name %></h2>
       <% if @user == current_user %>
        <%= link_to  edit_user_path(@user) do %>
        <button type="button" class="nes-btn is-primary">プロフィール編集</button>
        <% end %>
       <% else %>
        <% if current_user.following?(@user) %>
         <%= link_to "フォロー解除", user_relationships_path(@user.id), method: :delete, class: "nes-btn is-primary w-25" %>
        <% else %>
         <%= link_to "フォロー", user_relationships_path(@user.id), method: :post, class: "nes-btn is-primary w-25" %>
        <% end %>
       <% end %>
       </div>
     <div class ="d-flex flex-wrap">
      <%= link_to user_followings_path(@user),class:"no-underline" do %>
       <p class ="text-white">フォロー中<%= @user.followings.count %>人　</p>
      <% end %>
	     <%= link_to user_followers_path(@user),class:"no-underline" do %>
	      <p class ="text-white">フォロワー<%= @user.followers.count %>人　</p>
	      	<% end %>
	      <%= link_to favorites_path,class:"no-underline" do %>
       <p class ="text-white">お気に入り<%= @user.favorites.count %>件</p>
       <% end %>
      </div>
      <strong><p><%= @user.introduction %></p></strong>
     </div>
    </div>
   </div>
  </div>
 </div>
</div>

   <% if @deck_recipe.present? %>
    <% if @deck_recipe.is_released == true %>
    <div class ="row">
    <div class= "user-deck_square">
    <div class = "col-8 offset-2">
    <div class="d-flex flex-wrap">
     <% @deck_squares.each do |deck_square| %>
      <% square = Square.find_by(id: deck_square.square.id) %>
      <%= link_to square_path(deck_square.square.id) do %>
       <%= attachment_image_tag square, :image, size: "250x250", format: 'jpeg' %>
      <% end %>
     <% end %>
     <div class ="nes-badge mysquare-theme mb-5">
        <span class="is-dark"><%= @deck_recipe.theme %></span>
       </div>
       </div>
     </div>
     </div>
      </div>
    <% else %>
     <% if @user == current_user %>
      <div class ="text-center">
      <p>※My squareの公開ステータスは非公開のため、他のユーザーは閲覧できません。</p>
      </div>

    <div class ="row">
     <div class= "user-deck_square">
    <div class = "col-8 offset-2">
    <div class="d-flex flex-wrap">
     <% @deck_squares.each do |deck_square| %>
      <% square = Square.find_by(id: deck_square.square.id) %>
      <%= link_to square_path(deck_square.square.id) do %>
       <%= attachment_image_tag square, :image, size: "250x250", format: 'jpeg' %>
      <% end %>
     <% end %>
     <div class ="nes-badge mysquare-theme mb-5">
        <span class="is-dark"><%= @deck_recipe.theme %></span>
       </div>
     </div>
     </div>
      </div>
      </div>
     <% else %>
      <div class ="text-center">
       <p>ユーザーのMy squareは非公開です。</p>
      </div>
     <% end %>
    <% end %>
  <% else %>
   <div class ="text-center">
    <p>My squareが作成されていません。</p>
    </div>
  <% end %>


