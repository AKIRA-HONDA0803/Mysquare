<body class ="mypage">
<div class = "container-lg offset-lg-1">
 <div class= "text-center text-white">
  <%= flash[:notice] %>
 </div>

 <div class = "row">
  <div class ="col-lg-10 offset-lg-1 mb-lg-5">
   <div class="nes-container is-dark">
    <div class="d-flex flex-wrap">
     <div class ="col-2">
    <%= attachment_image_tag @user, :profile_image, size: "100x100", fallback: "no_image.jpg", class: "rounded-circle" %>
    </div>
     <div class ="col-10">
      <div class="d-flex justify-content-between">
      <h2><%= @user.name %></h2>
       <% if @user == current_user %>
        <%= link_to  edit_user_path(@user) do %>
        <button type="button" class="nes-btn is-primary">プロフィール編集</button>
        <% end %>
       <% else %>
        <% if current_user.following?(@user) %>
         <%= link_to "フォロー解除", user_relationships_path(@user.id), method: :delete, class: "nes-btn is-primary w-25" %>
        <% else %>
         <%= link_to "フォロー", user_relationships_path(@user.id), method: :post, class: "nes-btn is-primary w-25" %>
        <% end %>
       <% end %>
       </div>
     <div class ="d-flex flex-wrap">
      <%= link_to  square_lists_path(@user.id),class:"no-underline" do %>
       <p class ="text-white"> Square<%= @user.squares.count %>件</p>
       <% end %>
      <%= link_to user_followings_path(@user),class:"no-underline" do %>
       <p class ="text-white ml-3">フォロー中<%= @user.followings.count %>人　</p>
      <% end %>
	     <%= link_to user_followers_path(@user),class:"no-underline" do %>
	      <p class ="text-white">フォロワー<%= @user.followers.count %>人　</p>
	      	<% end %>
	      <%= link_to favorites_path,class:"no-underline" do %>
       <p class ="text-white">お気に入り<%= @user.favorites.count %>件 </p>
       <% end %>
      </div>
      <strong><p><%= @user.introduction %></p></strong>
     </div>
    </div>
   </div>
  </div>
 </div>
</div>
<div class = "container-lg offset-lg-1">
   <% if @deck_recipe.present? %>
    <% if @deck_recipe.is_released == true %>
    <div class ="row">
    <div class= "deck_squares">
    <div class = "col-lg-10 offset-lg-1">
    <div class="d-flex flex-wrap">
     <% @deck_squares.each do |deck_square| %>
      <% square = Square.find_by(id: deck_square.square.id) %>
      <%= link_to square_path(deck_square.square.id) do %>
       <%= attachment_image_tag square, :image, size: "300x300", format: 'jpeg' %>
      <% end %>
     <% end %>
     <div class ="nes-badge mysquare-theme">
        <span class="is-dark"><%= @deck_recipe.theme %></span>
       </div>
       </div>
     </div>
     </div>
      </div>
    <% else %>
     <% if @user == current_user %>
      <div class ="text-center text-white">
      <p>※ My squareの公開ステータスは非公開のため、他のユーザーは閲覧できません。</p>
      </div>

    <div class ="row">
    <div class = "col-lg-10 offset-lg-1">
     <div class= "deck_squares">
    <div class="d-flex flex-wrap">
     <% @deck_squares.each do |deck_square| %>
      <% square = Square.find_by(id: deck_square.square.id) %>
      <%= link_to square_path(deck_square.square.id) do %>
       <%= attachment_image_tag square, :image, size: "300x300", format: 'jpeg' %>
      <% end %>
     <% end %>
     <div class ="nes-badge mysquare-theme">
        <span class="is-dark"><%= @deck_recipe.theme %></span>
       </div>
     </div>
     </div>
      </div>
      </div>
     <% else %>
      <div class ="text-center text-white">
       <p>ユーザーのMy squareは非公開です。</p>
      </div>
     <% end %>
    <% end %>
  <% else %>
   <div class ="text-center text-white">
    <h3>My squareが作成されていません。</h3>
    </div>
    <div class ="row mt-lg-5">
    <div class= "col-lg-4">
     <%= link_to  squares_path,class: "no-underline" do %>
    <div class="nes-container is-dark with-title h-100">
  <p class="title"><font size="5">Squareを探す</font></p>
  <p>Squareの一覧ページです。</p>
  <p>他のユーザーが作成したSquareを閲覧することができます。</p>
  <p>新しい発見や新たな夢がきっと見つかるでしょう。</p>
</div>
<% end %>
</div>

    <div class= "col-lg-4">
     <%= link_to  deck_squares_path,class: "no-underline" do %>
    <div class="nes-container is-dark with-title h-100">
  <p class="title"><font size="5">My squareを編集</font></p>
  <p>My squareの編集ページです。</p>
  <p>デッキに入れたSquareの配置の変更や削除ができます。</p>
  <p>Squareを9個選択後、<br>My squareを公開しましょう。</p>
</div>
<% end %>
</div>

    <div class= "col-lg-4">
     <%= link_to new_square_path,class: "no-underline" do %>
    <div class="nes-container is-dark with-title h-100">
  <p class="title"><font size="5">Squareを作成</font></p>
  <p>Squareの作成ページです。</p>
  <p>まずはSquareを作成して、自分の夢を整理しましょう。</p>
  <p>思いつくままに作成することが大切です。</p>
</div>
</div>
<% end %>
</div>

  <% end %>
  </div>
  </div>
</body>

