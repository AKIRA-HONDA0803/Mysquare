<div class = "container offset-1">
 <div class= "text-center">
  <%= flash[:notice] %>
 </div>
 <div class = "row">
  <div class ="col-10 offset-1">
   <div class="nes-container is-rounded is-dark">
    <div class="d-flex flex-wrap">
    <%= attachment_image_tag @user, :profile_image, size: "100x100", fallback: "no_image.jpg" %>
     <div class ="col-8">
      <div class="d-flex justify-content-between">
      <h2><%= @user.name %></h2>
       <% if @user == current_user %>
        <%= link_to  edit_user_path(@user) do %>
        <button type="button" class="nes-btn is-primary">プロフィール編集</button>
        <% end %>
       <% else %>
        <% if current_user.following?(@user) %>
         <%= link_to "フォロー解除", user_relationships_path(@user.id), method: :delete, class: "nes-btn is-primary" %>
        <% else %>
         <%= link_to "フォロー", user_relationships_path(@user.id), method: :post, class: "nes-btn is-primary" %>
        <% end %>
       <% end %>
       </div>
      <p>
       <%= link_to favorites_path do %>お気に入り<%= @user.favorites.count %>件
       <% end %>
      </p>
      <p>
      <%= link_to user_followings_path(@user) do %>フォロー数<%= @user.followings.count %>人
      <% end %>
      </p>
      <p>
	      	<%= link_to user_followers_path(@user) do %>フォロワー数<%= @user.followers.count %>人
	      	<% end %>
	      	</p>
     </div>
     </div>
     <strong><p><%= @user.introduction %></p></strong>
</div>
      </div>
      </div>


   <% if @deck_recipe.present? %>

    <% if @deck_recipe.is_released == true %>
    <div class="d-flex flex-wrap col-11 offset-1 mt-5">
     <% @deck_squares.each do |deck_square| %>
      <% square = Square.find_by(id: deck_square.square.id) %>
      <%= link_to square_path(deck_square.square.id) do %>
       <%= attachment_image_tag square, :image, size: "304x304", format: 'jpeg' %>
      <% end %>
     <% end %>
     </div>
     <div　class ="row">
     <%= @deck_recipe.theme %>
    </div>

    <% else %>
     <% if @user == current_user %>
     <div class="d-flex flex-wrap col-11 offset-1 mt-5">
      <% @deck_squares.each do |deck_square| %>
       <% square = Square.find_by(id: deck_square.square.id) %>
       <%= link_to square_path(deck_square.square.id) do %>
        <%= attachment_image_tag square, :image, size: "304x304", format: 'jpeg' %>
       <% end %>
      <% end %>
      </div>
      <div class ="row">
     <%= @deck_recipe.theme %>
    </div>

     <% else %>
      <div class ="text-center">
       <p>ユーザーのMy squareは非公開です。</p>
      </div>
     <% end %>
    <% end %>
  <% else %>
   <div class ="text-center">
    <p>My squareが作成されていません。</p>
    </div>
  <% end %>
 </div>
 </div>
 </div>
</div>
</div>

